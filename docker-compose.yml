version: '2'
services:
  # web:
  #   build: .
  #   ports:
  #    - "5000:5000"
  #   volumes:
  #    - .:/code
  # redis:
  #   image: redis

  jupyter:
    # image: jupyter/jupyterhub:latest
    build: ./jupyterhub
    # command: jupyterhub --no-ssl --ip=0.0.0.0 -f /srv/jupyterhub/jupyterhub_config.py
    ports:
      - "8000:8000"
    links:
      - postgis:postgishost
    volumes:
      - "./data/jupyterhome:/home/jupyter"
  postgis:
    image: mdillon/postgis
    environment:
      - POSTGRES_PASSWORD=urbis
      - POSTGRES_DB=urbis
      - POSTGRES_USER=urbis
      - PGDATA=/var/local/pgdata
    ports:
      - "25432:5432"
    volumes:
      - "./data/pgdata:/var/local/pgdata"
